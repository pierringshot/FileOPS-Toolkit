#!/usr/bin/env bash
set -euo pipefail

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
REPO_ROOT="$(cd "${SCRIPT_DIR}/.." && pwd)"
VENV_DIR="${REPO_ROOT}/.venv"

if [[ ! -x "${VENV_DIR}/bin/fileops-toolkit" ]]; then
  echo "Bootstrapping environment via run.sh..." >&2
  "${REPO_ROOT}/run.sh" --help >/dev/null 2>&1 || true
fi

exec "${VENV_DIR}/bin/fileops-toolkit" "$@"
